!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DragArea=e():t.DragArea=e()}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist",i(i.s=2)}([function(t,e,i){var s=i(1);t.exports=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){s(t,e,i[e])})}return t}},function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e,i){"use strict";i.r(e);var s=i(0),n=i.n(s),o=function(t){t.prototype.on=function(t,e){if(!t||!e)throw new Error('missing parameter, function "on" need two parameters, one of them is event, another is callback function');this.events=this.events||[],this.events.push({event:t,funcName:e.name||"anonymous",callback:e})},t.prototype.off=function(e,i){if(this.events)if(i.name){for(let t=0,s=this.events;t<s.length;t++)if(s[t].funcName===i.name&&s[t].event===e)return void s.splice(t,1);console.error(`${t.name}'s ${e} event have no ${i.name} function`)}else console.error("can not remove a anonymous function");else console.error(`${t.name} have no event`)},t.prototype.once=function(t,e){if(!t||!e)throw new Error('missing parameter, function "once" need two parameters, one of them is event, another is callback function');this.events=this.events||[];let i=this.events.length;this.on(t,()=>{e.apply(this,arguments),this.events.splice(i,1)})},t.prototype.dispatchEvent=function(t,...e){this.events=this.events||[],this.events.forEach(i=>{i.event===t&&i.callback(...e)})}},r="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTM3OTI3ODg5MzUxIiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEwNDkiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNjc5LjQ1MzMxNSAzODMuNjMzNDAxYy0wLjQwOTMyMi0xMC4xNTMyNDQtNC4yMDA2NzItMjAuMTk1OTcxLTExLjk1NDI2My0yNy45NDg1MzktNy43NTE1NDQtNy43NDk0OTgtMTcuNzY3NjY2LTExLjUxNzMxMS0yNy45NDc1MTYtMTEuOTU0MjYzLTExLjMwMTM5NC0wLjQzNjk1Mi0yMi43MDkyMTEgMy4zMzA4NjItMzEuMzM1NjgyIDExLjk1NDI2M2wtOTYuMDk5NzA4IDk2LjEyNzMzOC05Ni4xMDA3MzItOTYuMTI3MzM4Yy04LjYyNTQ0OC04LjYyMzQwMS0yMC4wMzQyODktMTIuMzkxMjE1LTMxLjMzMzYzNi0xMS45NTQyNjMtMTAuMTUyMjIxIDAuNDM2OTUyLTIwLjE5NTk3MSA0LjIwNDc2NS0yNy45NDg1MzkgMTEuOTU0MjYzLTcuNzUyNTY4IDcuNzUxNTQ0LTExLjU0NDk0MSAxNy43OTUyOTUtMTEuOTU0MjYzIDI3Ljk0ODUzOS0wLjQ2NDU4MSAxMS4yOTkzNDcgMy4zMjc3OTIgMjIuNzA4MTg4IDExLjk1NDI2MyAzMS4zMzM2MzZsOTYuMDk5NzA4IDk2LjEyNzMzOC05Ni4wOTk3MDggOTYuMDc0MTI2Yy04LjYyNjQ3MSA4LjYyNTQ0OC0xMi40MTg4NDQgMjAuMDM0Mjg5LTExLjk1NDI2MyAzMS4zMzM2MzYgMC40MDkzMjIgMTAuMTUyMjIxIDQuMjAxNjk1IDIwLjE5NTk3MSAxMS45NTQyNjMgMjcuOTQ4NTM5IDcuNzUxNTQ0IDcuNzUxNTQ0IDE3Ljc5NTI5NSAxMS41NzI1NyAyNy45NDg1MzkgMTEuOTU2MzEgMTEuMjk5MzQ3IDAuNDkwMTY0IDIyLjcwODE4OC0zLjMzMDg2MiAzMS4zMzM2MzYtMTEuOTU2MzFsOTYuMTAwNzMyLTk2LjA3MzEwMiA5Ni4wOTk3MDggOTYuMDczMTAyYzguNjI2NDcxIDguNjI1NDQ4IDIwLjAzNDI4OSAxMi40NDU0NSAzMS4zMzU2ODIgMTEuOTU2MzEgMTAuMTc4ODI3LTAuMzgzNzQgMjAuMTk0OTQ4LTQuMjAzNzQyIDI3Ljk0NzUxNi0xMS45NTYzMSA3Ljc1MjU2OC03Ljc1MTU0NCAxMS41NDM5MTctMTcuNzk2MzE4IDExLjk1NDI2My0yNy45NDg1MzkgMC40NjM1NTgtMTEuMjk5MzQ3LTMuMzI3NzkyLTIyLjcwODE4OC0xMS45NTQyNjMtMzEuMzMzNjM2bC05Ni4wOTk3MDgtOTYuMDc0MTI2IDk2LjA5OTcwOC05Ni4xMjczMzhDNjc2LjEyNTUyMyA0MDYuMzQxNTg4IDY3OS45MTY4NzIgMzk0LjkzMjc0OCA2NzkuNDUzMzE1IDM4My42MzM0MDF6TTUxMi4xMTYxNDUgNjMuOTE2NzI4Yy0yNDYuOTUzNDYyIDAtNDQ3LjE3ODY2OSAyMDAuMjI3MjU0LTQ0Ny4xNzg2NjkgNDQ3LjE3ODY2OSAwIDI0Ni45NTM0NjIgMjAwLjIyNTIwNyA0NDcuMTc3NjQ2IDQ0Ny4xNzg2NjkgNDQ3LjE3NzY0NiAyNDYuOTUzNDYyIDAgNDQ3LjE3ODY2OS0yMDAuMjI0MTg0IDQ0Ny4xNzg2NjktNDQ3LjE3NzY0NkM5NTkuMjk0ODE0IDI2NC4xNDM5ODIgNzU5LjA2OTYwNyA2My45MTY3MjggNTEyLjExNjE0NSA2My45MTY3Mjh6TTUxMi4xMTYxNDUgODc0LjQyNzQyNmMtMjAwLjMzMzY3OCAwLTM2My4zMzIwMjktMTYyLjk5NjMwNS0zNjMuMzMyMDI5LTM2My4zMzMwNTIgMC0yMDAuMzMzNjc4IDE2Mi45OTkzNzQtMzYzLjMzMzA1MiAzNjMuMzMyMDI5LTM2My4zMzMwNTJzMzYzLjMzMzA1MiAxNjIuOTk5Mzc0IDM2My4zMzMwNTIgMzYzLjMzMzA1MkM4NzUuNDQ5MTk3IDcxMS40MzExMjIgNzEyLjQ0OTgyMyA4NzQuNDI3NDI2IDUxMi4xMTYxNDUgODc0LjQyNzQyNnoiIHAtaWQ9IjEwNTAiIGRhdGEtc3BtLWFuY2hvci1pZD0iYTMxM3guNzc4MTA2OS4wLmkwIiBmaWxsPSIjNzA3MDcwIj48L3BhdGg+PC9zdmc+";let M=1;class h{constructor(t){this.DEFAULT_OPTIONS=Object.assign({width:60,height:60,rotate:0,x:0,y:0,left:20,top:20,background:"#2aa7ff",opacity:.6,innerText:"默认文字",slot:""},t),this.$el=this.area=this.createDom(),this.setAreaStyle(),this.initEvent()}createDom(){const t=document.createElement("div");if(t.style.position="absolute",t.style.width=this.DEFAULT_OPTIONS.width+"px",t.style.height=this.DEFAULT_OPTIONS.height+"px",t.style.left=this.DEFAULT_OPTIONS.left+"px",t.style.top=this.DEFAULT_OPTIONS.top+"px",t.style.background=this.DEFAULT_OPTIONS.background,t.style.opacity=this.DEFAULT_OPTIONS.opacity,t.style.zIndex=++M,this.DEFAULT_OPTIONS.innerText){const e=document.createElement("span");e.innerText=this.DEFAULT_OPTIONS.innerText,t.appendChild(e)}if(this.DEFAULT_OPTIONS.slot){const e=document.createElement("div");e.innerHTML=this.DEFAULT_OPTIONS.slot,t.appendChild(e)}t.style.whiteSpace="noWrap",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.flexDirection="column";const e=document.createElement("img");return e.src=r,e.style.position="absolute",e.style.right=0,e.style.top=0,e.style.width="20px",e.style.color="#000",e.style.transform="translate3D(50%, -50%, 0)",e.onclick=(()=>{this.removeSelf()}),t.appendChild(e),t}initEvent(){this.area.addEventListener("click",(()=>{let t=null;return()=>{t?this.dispatchEvent("dbClick",this):t=setTimeout(()=>{t=null},200)}})()),this.area.addEventListener("mousedown",t=>{t.preventDefault(),this.isMouseDown=!0,this.startPoint={x:t.clientX,y:t.clientY},this.area.style.zIndex=++M}),this.area.addEventListener("mouseup",t=>{this.isMouseDown=!1}),this.area.addEventListener("mousemove",t=>{if(!this.isMouseDown){const e=t.clientX-this.area.getBoundingClientRect().left,i=t.clientY-this.area.getBoundingClientRect().top;this.setMouseStyle(e,i)}}),this.DEFAULT_OPTIONS.parent.addEventListener("mousemove",t=>{this.isMouseDown&&(this.nowPoint={x:t.clientX,y:t.clientY},this.computeOffset(this.nowPoint,this.startPoint),this.setAreaStyle(),this.startPoint=this.nowPoint)})}setMouseStyle(t,e){this.mouseStyle="move";const i=this.DEFAULT_OPTIONS;t>i.width-10&&e<10?this.mouseStyle="pointer":e>i.height-10&&t>i.width-10?this.mouseStyle="se-resize":t<10&&e<10?this.mouseStyle="nw-resize":t<10&&e>=i.height-10?this.mouseStyle="sw-resize":t>10&&t<i.width-10&&e<10?this.mouseStyle="n-resize":t>10&&t<=i.width-10&&e>=i.height-10?this.mouseStyle="s-resize":t<10&&e<i.height-10&&e>10?this.mouseStyle="w-resize":t>i.width-10&&e>10&&e<i.height-10?this.mouseStyle="e-resize":this.mouseStyle="move",this.area.style.cursor=this.mouseStyle}computeOffset(t,e){let i=t.x-e.x,s=t.y-e.y;switch(this.mouseStyle){case"nw-resize":this.DEFAULT_OPTIONS.width+=-i,this.DEFAULT_OPTIONS.height+=-s,this.DEFAULT_OPTIONS.x+=i,this.DEFAULT_OPTIONS.y+=s;break;case"ne-resize":this.DEFAULT_OPTIONS.width+=i,this.DEFAULT_OPTIONS.height+=-s,this.DEFAULT_OPTIONS.y+=s;break;case"sw-resize":this.DEFAULT_OPTIONS.width+=-i,this.DEFAULT_OPTIONS.height+=s,this.DEFAULT_OPTIONS.x+=i;break;case"se-resize":this.DEFAULT_OPTIONS.width+=i,this.DEFAULT_OPTIONS.height+=s;break;case"w-resize":this.DEFAULT_OPTIONS.width+=-i,this.DEFAULT_OPTIONS.x+=i;break;case"n-resize":this.DEFAULT_OPTIONS.height+=-s,this.DEFAULT_OPTIONS.y+=s;break;case"e-resize":this.DEFAULT_OPTIONS.width+=i;break;case"s-resize":this.DEFAULT_OPTIONS.height+=s;break;case"move":this.DEFAULT_OPTIONS.x+=i,this.DEFAULT_OPTIONS.y+=s}}setAreaStyle(){const t=`\n            translateX(${this.DEFAULT_OPTIONS.x}px) \n            translateY(${this.DEFAULT_OPTIONS.y}px) \n            translateZ(0px)\n            rotate(${this.DEFAULT_OPTIONS.rotate}deg)\n        `;this.area.style.transform=t,this.area.style.msTransform=t,this.area.style.webkitTransform=t,this.area.style.width=this.DEFAULT_OPTIONS.width+"px",this.area.style.height=this.DEFAULT_OPTIONS.height+"px"}removeSelf(){this.dispatchEvent("close")}getInfo(){const t=this.DEFAULT_OPTIONS.parent.getBoundingClientRect();return Object.assign({},{height:this.DEFAULT_OPTIONS.height,width:this.DEFAULT_OPTIONS.width,top:this.DEFAULT_OPTIONS.top+this.DEFAULT_OPTIONS.y,left:this.DEFAULT_OPTIONS.left+this.DEFAULT_OPTIONS.x,leftProportion:((this.DEFAULT_OPTIONS.x+this.DEFAULT_OPTIONS.left)/t.width*100).toFixed(2)+"%",topProportion:((this.DEFAULT_OPTIONS.y+this.DEFAULT_OPTIONS.top)/t.height*100).toFixed(2)+"%",widthProportion:(this.DEFAULT_OPTIONS.width/t.width*100).toFixed(2)+"%",heightProportion:(this.DEFAULT_OPTIONS.height/t.height*100).toFixed(2)+"%"})}}o(h);var T=h;class a{constructor(t,e={}){if("string"==typeof t){const e=document.getElementById(t);this.container=e||document.body}else{if(!(t instanceof HTMLElement))return console.error("container must be exist");this.container=t}this.DEFAULT_OPTIONS=Object.assign({},e),this.childArea=new Map,this.initContainer()}initContainer(){this.container.style.position="relative",this.container.style.overflow="hidden"}initEvent(){this.container.addEventListener("mousedown",function(t){t.preventDefault()})}addArea(t){let e=new T(n()({parent:this.container},t));return e.once("close",()=>{this.childArea.has(e)&&(this.container.removeChild(e.$el),this.childArea.delete(e))}),e.on("dbClick",t=>{this.dispatchEvent("areaDbClick",t)}),this.container.appendChild(e.$el),this.childArea.set(e,{}),e}removeOneArea(t){this.childArea.has(t)&&(this.container.removeChild(t.$el),this.childArea.delete(t))}removeAllArea(){this.childArea.forEach((t,e)=>{this.container.removeChild(e.$el)}),this.childArea.clear()}getAllAreas(){return[...this.childArea.keys()]}getAllAreasInfo(){return[...this.childArea.keys()].map(t=>t.getInfo())}}o(a);var c=a;e.default=c}]).default});